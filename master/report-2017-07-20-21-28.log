2017-07-20 21:34:11,914 main DEBUG Initializing configuration XmlConfiguration[location=jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml]
2017-07-20 21:34:11,920 main DEBUG Installed script engines
2017-07-20 21:34:12,201 main DEBUG Oracle Nashorn Version: 1.8.0_152, Language: ECMAScript, Threading: Not Thread Safe, Compile: true, Names: {nashorn, Nashorn, js, JS, JavaScript, javascript, ECMAScript, ecmascript}
2017-07-20 21:34:12,375 main DEBUG AppleScriptEngine Version: 1.1, Language: AppleScript, Threading: Not Thread Safe, Compile: false, Names: {AppleScriptEngine, AppleScript, OSA}
2017-07-20 21:34:12,376 main DEBUG PluginManager 'Core' found 112 plugins
2017-07-20 21:34:12,376 main DEBUG PluginManager 'Level' found 0 plugins
2017-07-20 21:34:12,380 main DEBUG PluginManager 'Lookup' found 13 plugins
2017-07-20 21:34:12,381 main DEBUG Building Plugin[name=layout, class=org.apache.logging.log4j.core.layout.PatternLayout].
2017-07-20 21:34:12,388 main DEBUG PluginManager 'TypeConverter' found 26 plugins
2017-07-20 21:34:12,400 main DEBUG PatternLayout$Builder(pattern="[%d{yyyy-MM-dd HH:mm:ss:SSS}] [%p] - %l - %m%n", PatternSelector=null, Configuration(jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml), Replace=null, charset="UTF-8", alwaysWriteExceptions="null", disableAnsi="null", noConsoleNoAnsi="null", header="null", footer="null")
2017-07-20 21:34:12,400 main DEBUG PluginManager 'Converter' found 41 plugins
2017-07-20 21:34:12,408 main DEBUG Building Plugin[name=appender, class=org.apache.logging.log4j.core.appender.ConsoleAppender].
2017-07-20 21:34:12,415 main DEBUG ConsoleAppender$Builder(target="SYSTEM_OUT", follow="null", direct="null", bufferedIo="null", bufferSize="null", immediateFlush="null", ignoreExceptions="null", PatternLayout([%d{yyyy-MM-dd HH:mm:ss:SSS}] [%p] - %l - %m%n), name="Console", Configuration(jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml), Filter=null)
2017-07-20 21:34:12,415 main DEBUG Starting OutputStreamManager SYSTEM_OUT.false.false
2017-07-20 21:34:12,415 main DEBUG Building Plugin[name=appenders, class=org.apache.logging.log4j.core.config.AppendersPlugin].
2017-07-20 21:34:12,417 main DEBUG createAppenders(={Console})
2017-07-20 21:34:12,417 main DEBUG Building Plugin[name=AppenderRef, class=org.apache.logging.log4j.core.config.AppenderRef].
2017-07-20 21:34:12,421 main DEBUG createAppenderRef(ref="Console", level="null", Filter=null)
2017-07-20 21:34:12,421 main DEBUG Building Plugin[name=root, class=org.apache.logging.log4j.core.config.LoggerConfig$RootLogger].
2017-07-20 21:34:12,422 main DEBUG createLogger(additivity="null", level="DEBUG", includeLocation="null", ={Console}, ={}, Configuration(jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml), Filter=null)
2017-07-20 21:34:12,423 main DEBUG Building Plugin[name=loggers, class=org.apache.logging.log4j.core.config.LoggersPlugin].
2017-07-20 21:34:12,424 main DEBUG createLoggers(={root})
2017-07-20 21:34:12,424 main DEBUG Configuration XmlConfiguration[location=jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml] initialized
2017-07-20 21:34:12,425 main DEBUG Starting configuration XmlConfiguration[location=jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml]
2017-07-20 21:34:12,425 main DEBUG Started configuration XmlConfiguration[location=jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml] OK.
2017-07-20 21:34:12,425 main DEBUG Shutting down OutputStreamManager SYSTEM_OUT.false.false-1
2017-07-20 21:34:12,426 main DEBUG Shut down OutputStreamManager SYSTEM_OUT.false.false-1, all resources released: true
2017-07-20 21:34:12,426 main DEBUG Appender DefaultConsole-1 stopped with status true
2017-07-20 21:34:12,426 main DEBUG Stopped org.apache.logging.log4j.core.config.DefaultConfiguration@619a5dff OK
2017-07-20 21:34:12,473 main DEBUG Registering MBean org.apache.logging.log4j2:type=4b67cf4d
2017-07-20 21:34:12,475 main DEBUG Registering MBean org.apache.logging.log4j2:type=4b67cf4d,component=StatusLogger
2017-07-20 21:34:12,476 main DEBUG Registering MBean org.apache.logging.log4j2:type=4b67cf4d,component=ContextSelector
2017-07-20 21:34:12,477 main DEBUG Registering MBean org.apache.logging.log4j2:type=4b67cf4d,component=Loggers,name=
2017-07-20 21:34:12,478 main DEBUG Registering MBean org.apache.logging.log4j2:type=4b67cf4d,component=Appenders,name=Console
2017-07-20 21:34:12,480 main DEBUG Reconfiguration complete for context[name=4b67cf4d] at URI jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml (org.apache.logging.log4j.core.LoggerContext@72967906) with optional ClassLoader: null
2017-07-20 21:34:12,480 main DEBUG Shutdown hook enabled. Registering a new one.
2017-07-20 21:34:12,481 main DEBUG LoggerContext[name=4b67cf4d, org.apache.logging.log4j.core.LoggerContext@72967906] started OK.
[2017-07-20 21:34:12:485] [INFO] - org.skywalking.apm.test.agent.tool.Main.main(Main.java:19) - Begin to validate data.
[2017-07-20 21:34:12:490] [INFO] - org.skywalking.apm.test.agent.tool.entity.TestCaseDesc$Parser.parse(TestCaseDesc.java:41) - load case desc: caseName[dubbox-rest-case], caseRequestURL[http://localhost:18080/dubbox-case/case/dubbox-rest], components[[org.skywalking.apm.test.agent.tool.entity.TestCase$Component@6302bbb1, org.skywalking.apm.test.agent.tool.entity.TestCase$Component@31304f14]], isValidate[true]
[2017-07-20 21:34:12:492] [INFO] - org.skywalking.apm.test.agent.tool.Main.main(Main.java:40) - start to assert data of test case[dubbox-rest-case]
[2017-07-20 21:34:12:612] [INFO] - org.skywalking.apm.test.agent.tool.caseassert.assertor.DataAssert.assertEquals(DataAssert.java:12) - excepted data:
{
  "registryItems": {
    "applications": [
      {
        "dubbox-provider": "nq 0"
      },
      {
        "dubbox-consumer": "nq 0"
      }
    ],
    "instances": [
      {
        "dubbox-provider": 1
      },
      {
        "dubbox-consumer": 1
      }
    ],
    "operationNames": [
      {
        "dubbox-consumer": [
          "/dubbox-case/case/dubbox-rest"
        ]
      },
      {
        "dubbox-provider": [
          "org.skywaking.apm.testcase.dubbo.services.GreetService.doBusiness()"
        ]
      }
    ]
  },
  "segmentItems": [
    {
      "applicationCode": "dubbox-consumer",
      "segmentSize": "1",
      "segments": [
        {
          "segmentId": "not null",
          "spans": [
            {
              "operationName": "org.skywaking.apm.testcase.dubbo.services.GreetService.doBusiness()",
              "operationId": "eq 0",
              "parentSpanId": "0",
              "spanId": "1",
              "spanLayer": "RPCFramework",
              "tags": [
                {
                  "key": "url",
                  "value": "not null"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "3",
              "isError": false,
              "spanType": "Exit",
              "peer": "not null",
              "peerId": "eq 0"
            },
            {
              "operationName": "/dubbox-case/case/dubbox-rest",
              "operationId": "eq 0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:18080/dubbox-case/case/dubbox-rest"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "1",
              "isError": false,
              "spanType": "Entry",
              "peerId": "eq 0"
            }
          ],
          "refs": [],
          "actualRefs": []
        }
      ]
    },
    {
      "applicationCode": "dubbox-provider",
      "segmentSize": "1",
      "segments": [
        {
          "segmentId": "not null",
          "spans": [
            {
              "operationName": "org.skywaking.apm.testcase.dubbo.services.GreetService.doBusiness()",
              "operationId": "eq 0",
              "parentSpanId": "-1",
              "spanId": "0",
              "tags": [
                {
                  "key": "url",
                  "value": "not null"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "3",
              "isError": false,
              "spanType": "Entry",
              "peerId": "eq 0"
            }
          ],
          "refs": [
            {
              "spanId": "1",
              "parentSegmentId": "${dubbox-consumer[0]}",
              "networkAddress": "not null",
              "entryServiceName": "/dubbox-case/case/dubbox-rest"
            }
          ],
          "actualRefs": []
        }
      ]
    }
  ]
}
[2017-07-20 21:34:12:619] [INFO] - org.skywalking.apm.test.agent.tool.caseassert.assertor.DataAssert.assertEquals(DataAssert.java:13) - actual data:
{
  "registryItems": {
    "applications": [
      {
        "localhost:3307": 3
      },
      {
        "mysql-case": 2
      }
    ],
    "instances": [
      {
        "mysql-case": 1
      }
    ],
    "operationNames": [
      {
        "localhost:3307": [
          "Mysql/JDBI/Connection/close",
          "Mysql/JDBI/Statement/execute",
          "Mysql/JDBI/PreparedStatement/executeQuery",
          "Mysql/JDBI/PreparedStatement/executeUpdate"
        ]
      },
      {
        "mysql-case": [
          "/",
          "/case/mysql"
        ]
      }
    ]
  },
  "segmentItems": [
    {
      "applicationCode": "mysql-case",
      "segmentSize": "4",
      "segments": [
        {
          "segmentId": "S.1500556952812.531923005.60075.42.1",
          "spans": [
            {
              "operationName": "/",
              "operationId": "0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500556952886",
              "endTime": "1500556956054",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500556964496.531923005.60075.43.1",
          "spans": [
            {
              "operationName": "",
              "operationId": "2",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500556964496",
              "endTime": "1500556964497",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500556968158.531923005.60075.44.1",
          "spans": [
            {
              "operationName": "Mysql/JDBI/PreparedStatement/executeUpdate",
              "operationId": "0",
              "parentSpanId": "0",
              "spanId": "1",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "CREATE TABLE test_007(\nid VARCHAR(1) PRIMARY KEY, \nvalue VARCHAR(1) NOT NULL)"
                }
              ],
              "logs": [],
              "startTime": "1500557014023",
              "endTime": "1500557014046",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "Mysql/JDBI/PreparedStatement/executeUpdate",
              "operationId": "0",
              "parentSpanId": "0",
              "spanId": "2",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "INSERT INTO test_007(id, value) VALUES(?,?)"
                }
              ],
              "logs": [],
              "startTime": "1500557014662",
              "endTime": "1500557014666",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "3",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "SELECT id, value FROM test_007 WHERE id\u003d?"
                }
              ],
              "logs": [],
              "startTime": "1500557015180",
              "endTime": "1500557015182",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "4",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "DELETE FROM test_007 WHERE id\u003d?"
                }
              ],
              "logs": [],
              "startTime": "1500557016511",
              "endTime": "1500557016514",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "5",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "DROP table test_007"
                }
              ],
              "logs": [],
              "startTime": "1500557016516",
              "endTime": "1500557016518",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "6",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": ""
                }
              ],
              "logs": [],
              "startTime": "1500557016521",
              "endTime": "1500557016522",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "/case/mysql",
              "operationId": "0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/case/mysql"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                }
              ],
              "logs": [],
              "startTime": "1500556968158",
              "endTime": "1500557016522",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500557032343.531923005.60075.46.1",
          "spans": [
            {
              "operationName": "",
              "operationId": "2",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500557032343",
              "endTime": "1500557032344",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        }
      ]
    }
  ]
}
[2017-07-20 21:34:12:622] [ERROR] - org.skywalking.apm.test.agent.tool.Main.main(Main.java:48) - assert failed.
Expected: dubbox-provider, Actual: null
[2017-07-20 21:34:12:622] [INFO] - org.skywalking.apm.test.agent.tool.entity.TestCaseDesc$Parser.parse(TestCaseDesc.java:41) - load case desc: caseName[mysql-case], caseRequestURL[http://localhost:18080/mysql-case/case/mysql], components[[org.skywalking.apm.test.agent.tool.entity.TestCase$Component@41488b16, org.skywalking.apm.test.agent.tool.entity.TestCase$Component@a8ef162]], isValidate[true]
[2017-07-20 21:34:12:622] [INFO] - org.skywalking.apm.test.agent.tool.Main.main(Main.java:40) - start to assert data of test case[mysql-case]
[2017-07-20 21:34:12:651] [INFO] - org.skywalking.apm.test.agent.tool.caseassert.assertor.DataAssert.assertEquals(DataAssert.java:12) - excepted data:
{
  "registryItems": {
    "applications": [
      {
        "mysql-case": "nq 0"
      }
    ],
    "instances": [
      {
        "mysql-case": 1
      }
    ],
    "operationNames": [
      {
        "mysql-case": [
          "/mysql-case/case/mysql"
        ]
      }
    ]
  },
  "segmentItems": [
    {
      "applicationCode": "mysql-case",
      "segmentSize": "1",
      "segments": [
        {
          "segmentId": "not null",
          "spans": [
            {
              "operationName": "Mysql/JDBI/PreparedStatement/execute",
              "operationId": "eq 0",
              "parentSpanId": "0",
              "spanId": "1",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "CREATE TABLE test_007(\nid VARCHAR(1) PRIMARY KEY, \nvalue VARCHAR(1) NOT NULL)"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "5",
              "isError": false,
              "spanType": "Exit",
              "peer": "not null",
              "peerId": "eq 0"
            },
            {
              "operationName": "Mysql/JDBI/PreparedStatement/execute",
              "operationId": "eq 0",
              "parentSpanId": "0",
              "spanId": "2",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "INSERT INTO test_007(id, value) VALUES(?,?)"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "5",
              "isError": false,
              "spanType": "Exit",
              "peer": "not null",
              "peerId": "eq 0"
            },
            {
              "operationName": "Mysql/JDBI/PreparedStatement/executeQuery",
              "operationId": "eq 0",
              "parentSpanId": "0",
              "spanId": "3",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "SELECT id, value FROM test_007 WHERE id\u003d?"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "5",
              "isError": false,
              "spanType": "Exit",
              "peer": "not null",
              "peerId": "eq 0"
            },
            {
              "operationName": "Mysql/JDBI/PreparedStatement/execute",
              "operationId": "eq 0",
              "parentSpanId": "0",
              "spanId": "4",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "DELETE FROM test_007 WHERE id\u003d?"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "5",
              "isError": false,
              "spanType": "Exit",
              "peer": "not null",
              "peerId": "eq 0"
            },
            {
              "operationName": "Mysql/JDBI/Statement/execute",
              "operationId": "eq 0",
              "parentSpanId": "0",
              "spanId": "5",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "DROP table test_007"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "5",
              "isError": false,
              "spanType": "Exit",
              "peer": "not null",
              "peerId": "eq 0"
            },
            {
              "operationName": "Mysql/JDBI/Connection/close",
              "operationId": "eq 0",
              "parentSpanId": "0",
              "spanId": "6",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": ""
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "5",
              "isError": false,
              "spanType": "Exit",
              "peer": "not null",
              "peerId": "eq 0"
            },
            {
              "operationName": "/mysql-case/case/mysql",
              "operationId": "eq 0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:18080/mysql-case/case/mysql"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "1",
              "isError": false,
              "spanType": "Entry",
              "peerId": "eq 0"
            }
          ],
          "refs": [],
          "actualRefs": []
        }
      ]
    }
  ]
}
[2017-07-20 21:34:12:657] [INFO] - org.skywalking.apm.test.agent.tool.caseassert.assertor.DataAssert.assertEquals(DataAssert.java:13) - actual data:
{
  "registryItems": {
    "applications": [
      {
        "localhost:3307": 3
      },
      {
        "mysql-case": 2
      }
    ],
    "instances": [
      {
        "mysql-case": 1
      }
    ],
    "operationNames": [
      {
        "localhost:3307": [
          "Mysql/JDBI/Connection/close",
          "Mysql/JDBI/Statement/execute",
          "Mysql/JDBI/PreparedStatement/executeQuery",
          "Mysql/JDBI/PreparedStatement/executeUpdate"
        ]
      },
      {
        "mysql-case": [
          "/",
          "/case/mysql"
        ]
      }
    ]
  },
  "segmentItems": [
    {
      "applicationCode": "mysql-case",
      "segmentSize": "4",
      "segments": [
        {
          "segmentId": "S.1500556952812.531923005.60075.42.1",
          "spans": [
            {
              "operationName": "/",
              "operationId": "0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500556952886",
              "endTime": "1500556956054",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500556964496.531923005.60075.43.1",
          "spans": [
            {
              "operationName": "",
              "operationId": "2",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500556964496",
              "endTime": "1500556964497",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500556968158.531923005.60075.44.1",
          "spans": [
            {
              "operationName": "Mysql/JDBI/PreparedStatement/executeUpdate",
              "operationId": "0",
              "parentSpanId": "0",
              "spanId": "1",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "CREATE TABLE test_007(\nid VARCHAR(1) PRIMARY KEY, \nvalue VARCHAR(1) NOT NULL)"
                }
              ],
              "logs": [],
              "startTime": "1500557014023",
              "endTime": "1500557014046",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "Mysql/JDBI/PreparedStatement/executeUpdate",
              "operationId": "0",
              "parentSpanId": "0",
              "spanId": "2",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "INSERT INTO test_007(id, value) VALUES(?,?)"
                }
              ],
              "logs": [],
              "startTime": "1500557014662",
              "endTime": "1500557014666",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "3",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "SELECT id, value FROM test_007 WHERE id\u003d?"
                }
              ],
              "logs": [],
              "startTime": "1500557015180",
              "endTime": "1500557015182",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "4",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "DELETE FROM test_007 WHERE id\u003d?"
                }
              ],
              "logs": [],
              "startTime": "1500557016511",
              "endTime": "1500557016514",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "5",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "DROP table test_007"
                }
              ],
              "logs": [],
              "startTime": "1500557016516",
              "endTime": "1500557016518",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "6",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": ""
                }
              ],
              "logs": [],
              "startTime": "1500557016521",
              "endTime": "1500557016522",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "/case/mysql",
              "operationId": "0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/case/mysql"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                }
              ],
              "logs": [],
              "startTime": "1500556968158",
              "endTime": "1500557016522",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500557032343.531923005.60075.46.1",
          "spans": [
            {
              "operationName": "",
              "operationId": "2",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500557032343",
              "endTime": "1500557032344",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        }
      ]
    }
  ]
}
[2017-07-20 21:34:12:660] [INFO] - org.skywalking.apm.test.agent.tool.caseassert.assertor.RegistryItemsAssert.assertEquals(RegistryItemsAssert.java:12) - registry applications assert successful.
[2017-07-20 21:34:12:662] [INFO] - org.skywalking.apm.test.agent.tool.caseassert.assertor.RegistryItemsAssert.assertEquals(RegistryItemsAssert.java:14) - registry instances assert successful.
[2017-07-20 21:34:12:663] [ERROR] - org.skywalking.apm.test.agent.tool.Main.main(Main.java:48) - assert failed.
assert operationName: 
 expected:/mysql-case/case/mysql
 actual: not found
[2017-07-20 21:34:12:663] [INFO] - org.skywalking.apm.test.agent.tool.entity.TestCaseDesc$Parser.parse(TestCaseDesc.java:41) - load case desc: caseName[opentracing-case], caseRequestURL[http://localhost:18080/opentracing-case/case/open-tracing], components[[org.skywalking.apm.test.agent.tool.entity.TestCase$Component@4eb386df, org.skywalking.apm.test.agent.tool.entity.TestCase$Component@79517588]], isValidate[true]
[2017-07-20 21:34:12:664] [INFO] - org.skywalking.apm.test.agent.tool.Main.main(Main.java:40) - start to assert data of test case[opentracing-case]
[2017-07-20 21:34:12:682] [INFO] - org.skywalking.apm.test.agent.tool.caseassert.assertor.DataAssert.assertEquals(DataAssert.java:12) - excepted data:
{
  "registryItems": {
    "applications": [
      {
        "open-tracing-case": "nq 0"
      }
    ],
    "instances": [
      {
        "open-tracing-case": 1
      }
    ],
    "operationNames": [
      {
        "open-tracing-case": [
          "/opentracing-case/case/open-tracing",
          "OpentracingCase/doGet",
          "OpentracingCase/testContinuation",
          "OpentracingCase/testLocalSpan"
        ]
      }
    ]
  },
  "segmentItems": [
    {
      "applicationCode": "open-tracing-case",
      "segmentSize": "2",
      "segments": [
        {
          "segmentId": "not null",
          "spans": [
            {
              "operationName": "OpentracingCase/testContinuation",
              "operationId": "eq 0",
              "parentSpanId": "2",
              "spanId": "3",
              "tags": [
                {
                  "key": "name",
                  "value": "test"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "eq 0",
              "isError": false,
              "spanType": "Local",
              "peerId": "eq 0"
            },
            {
              "operationName": "OpentracingCase/testLocalSpan",
              "operationId": "eq 0",
              "parentSpanId": "1",
              "spanId": "2",
              "tags": [
                {
                  "key": "name",
                  "value": "Test"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "eq 0",
              "componentName": "OpentracingService",
              "isError": false,
              "spanType": "Local",
              "peerId": "eq 0"
            },
            {
              "operationName": "OpentracingCase/doGet",
              "operationId": "eq 0",
              "parentSpanId": "0",
              "spanId": "1",
              "tags": [],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "eq 0",
              "isError": false,
              "spanType": "Local",
              "peerId": "eq 0"
            },
            {
              "operationName": "/opentracing-case/case/open-tracing",
              "operationId": "eq 0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:18080/opentracing-case/case/open-tracing"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                }
              ],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "1",
              "isError": false,
              "spanType": "Entry",
              "peerId": "eq 0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "not null",
          "spans": [
            {
              "operationName": "OpentracingCase/run",
              "operationId": "eq 0",
              "parentSpanId": "-1",
              "spanId": "0",
              "tags": [],
              "logs": [],
              "startTime": "nq 0",
              "endTime": "nq 0",
              "componentId": "eq 0",
              "isError": false,
              "spanType": "Local",
              "peerId": "eq 0"
            }
          ],
          "refs": [
            {
              "spanId": "3",
              "parentSegmentId": "${open-tracing-case[0]}",
              "networkAddress": "",
              "entryServiceName": "/opentracing-case/case/open-tracing"
            }
          ],
          "actualRefs": []
        }
      ]
    }
  ]
}
[2017-07-20 21:34:12:687] [INFO] - org.skywalking.apm.test.agent.tool.caseassert.assertor.DataAssert.assertEquals(DataAssert.java:13) - actual data:
{
  "registryItems": {
    "applications": [
      {
        "localhost:3307": 3
      },
      {
        "mysql-case": 2
      }
    ],
    "instances": [
      {
        "mysql-case": 1
      }
    ],
    "operationNames": [
      {
        "localhost:3307": [
          "Mysql/JDBI/Connection/close",
          "Mysql/JDBI/Statement/execute",
          "Mysql/JDBI/PreparedStatement/executeQuery",
          "Mysql/JDBI/PreparedStatement/executeUpdate"
        ]
      },
      {
        "mysql-case": [
          "/",
          "/case/mysql"
        ]
      }
    ]
  },
  "segmentItems": [
    {
      "applicationCode": "mysql-case",
      "segmentSize": "4",
      "segments": [
        {
          "segmentId": "S.1500556952812.531923005.60075.42.1",
          "spans": [
            {
              "operationName": "/",
              "operationId": "0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500556952886",
              "endTime": "1500556956054",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500556964496.531923005.60075.43.1",
          "spans": [
            {
              "operationName": "",
              "operationId": "2",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500556964496",
              "endTime": "1500556964497",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500556968158.531923005.60075.44.1",
          "spans": [
            {
              "operationName": "Mysql/JDBI/PreparedStatement/executeUpdate",
              "operationId": "0",
              "parentSpanId": "0",
              "spanId": "1",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "CREATE TABLE test_007(\nid VARCHAR(1) PRIMARY KEY, \nvalue VARCHAR(1) NOT NULL)"
                }
              ],
              "logs": [],
              "startTime": "1500557014023",
              "endTime": "1500557014046",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "Mysql/JDBI/PreparedStatement/executeUpdate",
              "operationId": "0",
              "parentSpanId": "0",
              "spanId": "2",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "INSERT INTO test_007(id, value) VALUES(?,?)"
                }
              ],
              "logs": [],
              "startTime": "1500557014662",
              "endTime": "1500557014666",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "3",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "SELECT id, value FROM test_007 WHERE id\u003d?"
                }
              ],
              "logs": [],
              "startTime": "1500557015180",
              "endTime": "1500557015182",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "4",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "DELETE FROM test_007 WHERE id\u003d?"
                }
              ],
              "logs": [],
              "startTime": "1500557016511",
              "endTime": "1500557016514",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "5",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": "DROP table test_007"
                }
              ],
              "logs": [],
              "startTime": "1500557016516",
              "endTime": "1500557016518",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "",
              "operationId": "3",
              "parentSpanId": "0",
              "spanId": "6",
              "spanLayer": "Database",
              "tags": [
                {
                  "key": "db.type",
                  "value": "sql"
                },
                {
                  "key": "db.instance",
                  "value": "test"
                },
                {
                  "key": "db.statement",
                  "value": ""
                }
              ],
              "logs": [],
              "startTime": "1500557016521",
              "endTime": "1500557016522",
              "componentId": "5",
              "componentName": "",
              "isError": false,
              "spanType": "Exit",
              "peer": "localhost:3307",
              "peerId": "0"
            },
            {
              "operationName": "/case/mysql",
              "operationId": "0",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/case/mysql"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                }
              ],
              "logs": [],
              "startTime": "1500556968158",
              "endTime": "1500557016522",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        },
        {
          "segmentId": "S.1500557032343.531923005.60075.46.1",
          "spans": [
            {
              "operationName": "",
              "operationId": "2",
              "parentSpanId": "-1",
              "spanId": "0",
              "spanLayer": "Http",
              "tags": [
                {
                  "key": "url",
                  "value": "http://localhost:8080/"
                },
                {
                  "key": "http.method",
                  "value": "GET"
                },
                {
                  "key": "status_code",
                  "value": "404"
                }
              ],
              "logs": [],
              "startTime": "1500557032343",
              "endTime": "1500557032344",
              "componentId": "1",
              "componentName": "",
              "isError": false,
              "spanType": "Entry",
              "peer": "",
              "peerId": "0"
            }
          ],
          "refs": [],
          "actualRefs": []
        }
      ]
    }
  ]
}
[2017-07-20 21:34:12:688] [ERROR] - org.skywalking.apm.test.agent.tool.Main.main(Main.java:48) - assert failed.
Expected: open-tracing-case, Actual: null
2017-07-20 21:34:13,680 pool-1-thread-1 DEBUG Stopping LoggerContext[name=4b67cf4d, org.apache.logging.log4j.core.LoggerContext@72967906]
2017-07-20 21:34:13,681 pool-1-thread-1 DEBUG Stopping LoggerContext[name=4b67cf4d, org.apache.logging.log4j.core.LoggerContext@72967906]...
2017-07-20 21:34:13,682 pool-1-thread-1 DEBUG Shutting down OutputStreamManager SYSTEM_OUT.false.false
2017-07-20 21:34:13,682 pool-1-thread-1 DEBUG Shut down OutputStreamManager SYSTEM_OUT.false.false, all resources released: true
2017-07-20 21:34:13,682 pool-1-thread-1 DEBUG Appender Console stopped with status true
2017-07-20 21:34:13,682 pool-1-thread-1 DEBUG Stopped XmlConfiguration[location=jar:file:/Users/xin/workbench/ascrutae/agent-integration-test/workspace/skywalking-autotest.jar!/log4j2.xml] OK
2017-07-20 21:34:13,683 pool-1-thread-1 DEBUG Stopped LoggerContext[name=4b67cf4d, org.apache.logging.log4j.core.LoggerContext@72967906] with status true
